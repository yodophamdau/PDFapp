/* ================== ÂÖ±ÈÄöË®≠ÂÆö ================== */

* {
  box-sizing: border-box;
}

html,
body {
  height: 100%;
}

/* Material Symbols (Google icon font) */
.material-symbols-outlined {
  font-family: "Material Symbols Outlined";
  font-weight: 400;
  font-style: normal;
  font-size: 24px; /* s·∫Ω b·ªã override trong t·ª´ng ch·ªó */
  line-height: 1;
  letter-spacing: normal;
  text-transform: none;
  display: inline-block;
  white-space: nowrap;
  word-wrap: normal;
  direction: ltr;
  -webkit-font-feature-settings: "liga";
  -webkit-font-smoothing: antialiased;
  font-variation-settings:
    "FILL" 0,
    "wght" 400,
    "GRAD" 0,
    "opsz" 24;
}


body {
  margin: 0;
  padding: 0;  /* ‚ùó b·ªè padding 16px */
  background: #f3f4f6; /* Êòé„Çã„ÅÑ„Ç∞„É¨„Éº */
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Yu Gothic",
    "Hiragino Kaku Gothic ProN", system-ui, sans-serif;
  color: #333;
}

button,
input,
textarea,
select {
  font-family: inherit;
}

/* üö´ NgƒÉn Safari iPhone auto-zoom khi focus input */
@supports (-webkit-touch-callout: none) {
  input,
  textarea,
  select {
    font-size: 16px !important; /* >=16px th√¨ Safari kh√¥ng zoom */
  }
}


/* ================== Á∑®ÈõÜÁîªÈù¢ÂÖ®‰Ωì ================== */
/* ‰∏äÈÉ®„Éê„ÉºÔºàÊàª„Çã„Éª„Éï„Ç°„Ç§„É´Âêç„ÉªPDF‰øùÂ≠òÔºâ */
#toolbar {
  display: flex;
  justify-content: space-between;
  align-items: center;
  margin-bottom: 12px;
  gap: 12px;
  flex-wrap: wrap;
  padding: 10px 12px;
  background: #ffffff;
  border-radius: 12px;
  border: 1px solid #e5e7eb;
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.03);
}

/* Êàª„Çã„Éú„Çø„É≥ */
#back-button {
  padding: 6px 12px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  background: #f9fafb;
  cursor: pointer;
  font-size: 13px;
}

#back-button:hover {
  background: #e5e7eb;
}

/* „Éï„Ç°„Ç§„É´ÂêçÂÖ•Âäõ */
.file-name-input {
  display: flex;
  align-items: center;
  gap: 8px;
  flex-wrap: wrap;
  flex: 1;
  justify-content: center;
}

.file-name-input label {
  font-size: 13px;
  color: #555;
}

#file-name {
  padding: 4px 8px;
  min-width: 180px;
  border-radius: 6px;
  border: 1px solid #d1d5db;
  font-size: 13px;
}

#file-name:focus {
  outline: none;
  border-color: #22c55e;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.18);
}

/* PDF‰øùÂ≠ò„Éú„Çø„É≥ */
#export-pdf {
  padding: 7px 14px;
  border-radius: 8px;
  border: none;
  cursor: pointer;
  font-size: 13px;
  background: #6366f1;
  color: #ffffff;
  min-width: 90px;
}

#export-pdf:hover {
  filter: brightness(1.05);
}

/* ================== A4„Éó„É¨„Éì„É•„Éº„Ç®„É™„Ç¢ ================== */

/* A4Á¥ô„ÅÆÂ§ñÊû† */
#a4-page {
  background: #ffffff;
  width: 100%;
  max-width: 620px;
  aspect-ratio: 1 / 1.414; /* A4Á∏¶ */
  border: none;
  box-shadow: none;
  display: flex;
  justify-content: center;
}

/* Á¥ô„ÅÆ‰∏≠„ÅÆ„É¨„Ç§„Ç¢„Ç¶„ÉàÊúâÂäπÈ†òÂüüÔºàÂ∑¶Âè≥15%„ÄÅ‰∏≠Â§Æ70%Ôºâ */
#a4-inner {
  width: 70%;
  height: 100%;

  /* ‚úÖ Thu nh·ªè ƒë·ªÉ th·∫ª ~ +12% so v·ªõi th·∫ª g·ªëc khi export ra A4 */
  transform: scale(0.7);
  transform-origin: top center;
}

/* ================== „Éñ„É≠„ÉÉ„ÇØÂÖ±ÈÄö ================== */

.block {
  border: 1px dashed #cbd5e1;
  padding: 8px;
  display: flex;
  justify-content: center;
  align-items: center;
  text-align: center;
  overflow: hidden;
  position: relative;
  background: #f9fafb;
  color: #555;
}

.block.placeholder {
  color: #9ca3af;
  font-size: 10px;
}

/* Block ƒëang ƒë∆∞·ª£c ch·ªçn (image / text) */
.block.is-selected {
  border-style: solid;
  border-color: #22c55e;
  box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4);
}


/* „Çπ„Éö„Éº„Çµ„ÉºË°åÔºàË¶ã„Åà„Å™„ÅÑË°åÔºâ */
.spacer {
  width: 100%;
  border: none;
  background: transparent;
}

.spacer-mid-1,
.spacer-mid-2 {
  border: none;
  background: transparent;
}

/* ================== „É¨„Ç§„Ç¢„Ç¶„ÉàÔºöÂú®Áïô„Ç´„Éº„ÉâÔºà2ÁîªÂÉè+„ÉÜ„Ç≠„Çπ„ÉàÔºâ ================== */
/* ‰∏ä7 / ÁîªÂÉè35 / Èñì2 / ÁîªÂÉè35 / Èñì2 / „ÉÜ„Ç≠„Çπ„Éà14 / ‰∏ã5 = 100 */

#a4-inner.layout-3blocks {
  display: grid;
  grid-template-rows:
    20fr   /* spacer-top */
    30fr  /* block-1 (ÁîªÂÉè1) */
    1fr   /* spacer-mid-1 */
    30fr  /* block-2 (ÁîªÂÉè2) */
    1fr   /* spacer-mid-2 */
    17fr  /* block-3 („ÉÜ„Ç≠„Çπ„Éà) */
    1fr;  /* spacer-bottom */
}
body.theme-night.pdf-mode #a4-inner.layout-3blocks {
  grid-template-rows:
    20fr   /* spacer-top */
    30fr  /* block-1 (ÁîªÂÉè1) */
    1fr   /* spacer-mid-1 */
    30fr  /* block-2 (ÁîªÂÉè2) */
    1fr   /* spacer-mid-2 */
    17fr  /* block-3 („ÉÜ„Ç≠„Çπ„Éà) */
    1fr;  /* spacer-bottom */
}

/* ================== „É¨„Ç§„Ç¢„Ç¶„ÉàÔºö„Ç≠„É£„ÉÉ„Ç∑„É•„Ç´„Éº„ÉâÔºà1ÁîªÂÉè+„ÉÜ„Ç≠„Çπ„ÉàÔºâ ================== */
/* ‰∏ä7 / ‰∏ä‰ΩôÁôΩ17 / ÁîªÂÉè35 / Èñì2 / „ÉÜ„Ç≠„Çπ„Éà14 / ‰∏ã25 = 100 */

#a4-inner.layout-2blocks {
  display: grid;
  grid-template-rows:
    15fr   /* spacer-top */
    17fr  /* spacer-mid-1ÔºàÁîªÂÉè‰∏ä„ÅÆ‰ΩôÁôΩÔºâ */
    33fr  /* block-1 (ÁîªÂÉè) */
    1fr   /* spacer-mid-2ÔºàÁîªÂÉè„Å®„ÉÜ„Ç≠„Çπ„Éà„ÅÆÈñìÔºâ */
    17fr  /* block-2 („ÉÜ„Ç≠„Çπ„Éà) */
    17fr; /* spacer-bottom */
}
body.theme-night.pdf-mode #a4-inner.layout-2blocks {
  grid-template-rows:
    15fr  /* spacer-top: l·ªÅ tr√™n */
    15fr  /* spacer tr√™n ·∫£nh */
    33r  /* block-1 (ÁîªÂÉè) ‚Äì ·∫£nh to h∆°n 1 ch√∫t */
    2fr   /* kho·∫£ng gi·ªØa ·∫£nh v√† text */
    18fr  /* block-2 („ÉÜ„Ç≠„Çπ„Éà) ‚Äì text cao h∆°n */
    17fr; /* spacer-bottom: l·ªÅ d∆∞·ªõi, nh·ªè h∆°n tr∆∞·ªõc nhi·ªÅu */
}
/* ================== ÁîªÂÉè„Éñ„É≠„ÉÉ„ÇØ ================== */

/* ÈÄöÂ∏∏ÊôÇÔºöÁîªÂÉè„ÇíÊû†„ÅÑ„Å£„Å±„ÅÑ„Å´Ë°®Á§∫ÔºàÊØîÁéáÁ∂≠ÊåÅ„ÄÅ„Éà„É™„Éü„É≥„Ç∞„ÅÇ„ÇäÔºâ */
.block[data-type="image"] {
  justify-content: center;
  align-items: center;
  padding: 0;
}

/* „Éó„É¨„Éº„Çπ„Éõ„É´„ÉÄ„ÉºÊôÇ„ÅØ„ÉÜ„Ç≠„Çπ„Éà„Çí‰∏≠Â§Æ„Å´ */
.block[data-type="image"].placeholder {
  justify-content: center;
  align-items: center;
}

/* ÁîªÂÉè„ÇíÊû†„ÅÑ„Å£„Å±„ÅÑ„Å´„Éï„Ç£„ÉÉ„Éà */
.block[data-type="image"] img {
  width: 100%;
  height: 100%;
  object-fit: fill;      /* Quan tr·ªçng: gi·ªØ nguy√™n t·ªâ l·ªá ·∫£nh */
  object-position: center;  /* cƒÉn gi·ªØa ·∫£nh trong block */
  background: #ffffff;      /* kho·∫£ng th·ª´a = n·ªÅn tr·∫Øng, nh√¨n g·ªçn tr√™n PDF */
}

/* ================== „ÉÜ„Ç≠„Çπ„Éà„Éñ„É≠„ÉÉ„ÇØ ================== */

/* Block text: n·ªôi dung hi·ªÉn th·ªã (b·∫£ng) th√¨ n·∫±m tr√™n, kh√¥ng cƒÉn gi·ªØa */
.block[data-type="text"] {
  justify-content: flex-start;
  align-items: stretch;
}

/* NH∆ØNG n·∫øu v·∫´n c√≤n placeholder
   (class="block ... placeholder" & data-type="text")
   ‚Üí cho hint text n·∫±m gi·ªØa */
.block[data-type="text"].placeholder {
  justify-content: center;
  align-items: center;
}

/* Container cho 4 d√≤ng th√¥ng tin */
.block-text-content {
  padding: 8px 10px;
  width: 100%;
  font-size: 11pt;
  line-height: 1.5;
}

/* M·ªói d√≤ng: label + value tr√™n c√πng m·ªôt h√†ng */
.info-row {
  display: flex;
  align-items: flex-start;
}

/* Label: width c·ªë ƒë·ªãnh, cƒÉn ph·∫£i ‚Üí d·∫•u Ôºö th·∫≥ng h√†ng */
.info-label {
  display: inline-block;
  width: 80px;          /* b·∫°n c√≥ th·ªÉ tƒÉng/gi·∫£m cho v·ª´a √Ω */
  text-align: right;
  margin-right: 6px;
  color: #4b5563;
}

/* Value: ph·∫ßn d·ªØ li·ªáu */
.info-value {
  flex: 1;
  color: #111827;
  text-align: left;
  word-break: break-all;     /* th√™m d√≤ng n√†y */
  overflow-wrap: anywhere;   /* n·∫øu mu·ªën m·ªÅm h∆°n n·ªØa */
}



/* ‰∏≠„ÅÆ„ÉÜ„Ç≠„Çπ„Éà„ÅØÂ∑¶ÂØÑ„Åõ„ÄÅÁ≠âÂπÖ„Éï„Ç©„É≥„Éà„ÅßÂ∏≥Á•®„Å£„ÅΩ„Åè */
.info-table {
  padding: 4px 8px;        /* ƒë·ªám m·ªèng h∆°n ch√∫t cho g·ªçn */
  font-size: 6.5pt;        /* ho·∫∑c 9pt, tu·ª≥ m·∫Øt b·∫°n ‚Äì nh·ªè h∆°n hi·ªán t·∫°i */
  line-height: 1.3;
  white-space: normal;
  text-align: left;
  max-height: 100%;
  overflow-y: auto;
  width: 100%;
  font-family: "Times New Roman", Times, serif !important;
}

/* ================== „ÉÜ„Ç≠„Çπ„ÉàÂÖ•Âäõ„É¢„Éº„ÉÄ„É´ ================== */

.modal.hidden {
  display: none;
}

.modal {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 1000;
}

.modal-content {
  background: #ffffff;
  padding: 20px 24px 18px;
  border-radius: 10px;
  width: 90%;
  max-width: 420px;
  box-shadow: 0 10px 25px rgba(0, 0, 0, 0.25);
  font-size: 14px;
  border: 1px solid #e5e7eb;
}
.modal-content h2 {
  margin: 0 0 14px;
  font-size: 15px;
  font-weight: 600;
  text-align: center;
  color: #111827;
  border-bottom: none;
  letter-spacing: 0.04em;
}

/* Title ri√™ng c·ªßa modal text ‚Äì c√≥ g·∫°ch nh·∫•n b√™n d∆∞·ªõi */
#text-edit-modal .modal-content h2 {
  font-size: 16px;
  font-weight: 650;
  position: relative;
}

#text-edit-modal .modal-content h2::after {
  content: "";
  display: block;

  /* ‚≠ê k√©o d√†i line ra theo chi·ªÅu ngang modal */
  width: 25%;             /* c√≥ th·ªÉ ch·ªânh 55% ~ 80% t√πy m·∫Øt b·∫°n */

  height: 2px;          /* m·ªèng h∆°n 1 ch√∫t cho tinh t·∫ø */
  
  /* ‚≠ê ƒë·ªïi sang x√°m nh·∫°t, blend v·ªõi panel k√≠nh m·ªù */
  background: rgba(148, 163, 184, 0.75);

  border-radius: 3px;
  margin: 5px auto 2px;   /* tƒÉng kho·∫£ng c√°ch d∆∞·ªõi title cho tho√°ng */
}



/* ====== Text Edit Modal ‚Äì overlay & panel ====== */

/* V√πng ch·ª©a t·ªù A4 ‚Äì l√† v√πng scroll duy nh·∫•t */
#a4-wrapper {
  flex: 1;                    /* chi·∫øm to√†n b·ªô kho·∫£ng tr·ªëng gi·ªØa top-bar v√† bottom-bar */
  margin-top: 8px;
  padding: 8px 0 8px;
  display: flex;
  justify-content: center;
  overflow-y: auto;           /* ch·ªâ ph·∫ßn n√†y scroll n·∫øu A4 cao qu√° */
  background: transparent;
}

/* Overlay ri√™ng cho modal text ‚Äì ƒë·ªìng b·ªô style v·ªõi image picker */
/* ====== Text Edit Modal ‚Äì bottom sheet style ====== */
#text-edit-modal {
  position: fixed;
  inset: 0;
  display: flex;
  justify-content: center;
  align-items: center;           /* ‚≠ê ƒë∆∞a panel l√™n ch√≠nh gi·ªØa m√†n h√¨nh */
  padding: 0 12px;               /* b·ªè padding d∆∞·ªõi ƒë·ªÉ th·∫≠t s·ª± n·∫±m gi·ªØa */

  /* overlay m·ªù nh·∫π, gi·ªØ nguy√™n nh∆∞ c≈© */
  background:
    radial-gradient(
      circle at center,
      rgba(15, 23, 42, 0.34) 0%,
      rgba(15, 23, 42, 0.18) 45%,
      rgba(15, 23, 42, 0.08) 75%,
      rgba(15, 23, 42, 0.0) 100%
    );
  backdrop-filter: blur(10px) saturate(1.05) brightness(0.98);
  -webkit-backdrop-filter: blur(10px) saturate(1.05) brightness(0.98);
  z-index: 1100;

  opacity: 0;
  transition: opacity 0.22s ease-out;
}

#text-edit-modal.hidden {
  display: none;
}

/* khi m·ªü */
#text-edit-modal:not(.hidden) {
  opacity: 1;
}


/* Khi m·ªü modal text */
#text-edit-modal:not(.hidden) {
  opacity: 1;
}

/* Panel b√™n trong ‚Äì bo tr√≤n, shadow ƒë·∫πp h∆°n + zoom-in */
/* Panel bottom sheet ‚Äì k√≠nh m·ªù gi·ªëng top/bottom bar */
#text-edit-modal .modal-content {
  width: 100%;
  max-width: 480px;
  margin: 0 auto;

  /* ‚≠ê modal n·∫±m gi·ªØa n√™n bo ƒë·ªÅu 4 g√≥c cho ƒë·∫πp */
  border-radius: 20px;

  padding: 16px 18px 14px;

  background: rgba(255, 255, 255, 0.70);
  border: 1px solid rgba(148, 163, 184, 0.6);
  backdrop-filter: blur(22px);
  -webkit-backdrop-filter: blur(22px);
  box-shadow:
    0 18px 38px rgba(15, 23, 42, 0.35),
    0 0 0 0.5px rgba(148, 163, 184, 0.35);

  /* animation nh·∫π khi hi·ªán l√™n (zoom nh·∫π t·ª´ gi·ªØa) */
  transform: scale(0.98);
  opacity: 0;
  transition:
    transform 0.24s cubic-bezier(0.22, 0.7, 0.3, 1),
    opacity 0.24s ease-out;
}

/* Khi modal hi·ªán ‚Üí panel pop-in nh·∫π */
#text-edit-modal:not(.hidden) .modal-content {
  transform: scale(1);
  opacity: 1;
}


/* Khi modal hi·ªán ‚Üí panel pop-in nh·∫π */
#text-edit-modal:not(.hidden) .modal-content {
  transform: translateY(0) scale(1);
  opacity: 1;
}


/* Khi modal hi·ªán ‚Üí panel pop-in nh·∫π */
#text-edit-modal:not(.hidden) .modal-content {
  transform: translateY(0) scale(1);
  opacity: 1;
}

/* H√†ng n√∫t trong bottom sheet ‚Äì Clear tr√°i, Save ph·∫£i */
.text-modal-actions {
  display: flex;
  align-items: center;
  justify-content: space-between;   /* üëâ ƒë·∫©y 2 n√∫t sang 2 b√™n */
  margin-top: 14px;
  padding: 0 4px 2px;
}


/* N√∫t icon trong modal text */
/* N√∫t icon: to h∆°n, c√¢n panel */
.text-modal-icon-btn {
  width: 52px;
  height: 52px;
  border-radius: 999px;
}

/* Icon b√™n trong n√∫t modal (Clear / Save) d√πng Material Symbols */
.text-modal-icon-btn .text-modal-icon {
  font-size: 22px;                       /* Size M nh∆∞ b·∫°n ch·ªçn */
  color: rgba(148, 163, 184, 0.9);       /* m√†u b·∫°c x√°m */
  line-height: 1;
  pointer-events: none;
}

/* Icon Save ‚Äì m√†u tr·∫Øng v√¨ n√∫t n·ªÅn xanh */
#text-save .text-modal-icon {
  color: #ffffff;
}


/* Icon b√™n trong: n√©t r√µ h∆°n */
.text-modal-icon-btn svg {
  width: 28px;
  height: 28px;
}

/* N√∫t SAVE m√†u xanh ‚Äì b√≥ng m·ªÅm h∆°n */
.text-modal-icon-primary {
  border-color: #22c55e;
  background: linear-gradient(145deg, #25d366, #1da751);
}
.text-modal-icon-primary svg {
  color: #ffffff;
}


/* N√∫t ‰øùÂ≠ò ‚Äì m√†u xanh l√°, ƒë·ªìng b·ªô app */
.text-modal-icon-primary {
  border-color: #22c55e;
  background: #22c55e;
}

.text-modal-icon-primary svg {
  color: #ffffff;
}

/* Hover / active gi·ªëng iOS */
.text-modal-icon-btn:hover {
  filter: brightness(1.04);
  box-shadow: 0 6px 14px rgba(15, 23, 42, 0.22);
}

.text-modal-icon-btn:active {
  transform: translateY(1px) scale(0.94);
  box-shadow: 0 3px 8px rgba(15, 23, 42, 0.26);
}

/* Ripple effect khi tap */
.text-modal-icon-btn::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: rgba(148, 163, 184, 0.35);
  opacity: 0;
  pointer-events: none;
  transition:
    width 0.32s ease-out,
    height 0.32s ease-out,
    opacity 0.4s ease-out;
}

.text-modal-icon-btn:active::after {
  width: 200%;
  height: 200%;
  opacity: 1;
}


/* ÂêÑË°åÔºà„É©„Éô„É´ÔºãÂÖ•ÂäõÔºâ */
.modal-row {
  display: flex;
  align-items: center;
  margin-bottom: 12px;  /* kho·∫£ng c√°ch d√†y h∆°n */
}

#text-edit-modal .modal-row:last-of-type {
  margin-bottom: 0;     /* h√†ng cu·ªëi kh√¥ng b·ªã d∆∞ kho·∫£ng tr·∫Øng */
}

.modal-row span {
  width: 80px;
  text-align: right;
  margin-right: 8px;
  font-weight: 600;
  color: #555;
}

/* ÂÖ•ÂäõÊ¨Ñ */
.modal-row input {
  flex: 1;
  padding: 4px 8px;
  border-radius: 4px;
  border: 1px solid #d1d5db;
  font-size: 13px;
  outline: none;
  background: #f9fafb;
}

/* 4 √¥ input trong modal: tr·ªü v·ªÅ x√°m m·∫∑c ƒë·ªãnh */
.modal-row input {
  border: 1px solid #d1d5db;
  background: #f9fafb;
  transition: 0.15s ease;
}

/* Khi focus: ch·ªâ s√°ng nh·∫π border, kh√¥ng ƒë·ªïi m√†u */
.modal-row input:focus {
  outline: none;
  border-color: #9ca3af;              /* x√°m nh·∫°t */
  box-shadow: 0 0 0 1px rgba(156,163,175,0.35); /* glow x√°m */
  background: #ffffff;
}

/* „Éú„Çø„É≥„Ç®„É™„Ç¢ */
.modal-buttons {
  display: flex;
  justify-content: flex-end;
  gap: 8px;
  margin-top: 14px;
}

.modal-buttons button {
  padding: 6px 14px;
  border-radius: 6px;
  border: 1px solid #d1d5db;
  cursor: pointer;
  font-size: 13px;
  background: #f9fafb;
}

/* „Ç≠„É£„É≥„Çª„É´ */
#text-cancel {
  background: #f9fafb;
}

/* ‰øùÂ≠ò„Éú„Çø„É≥„ÇíÂ∞ë„ÅóÂº∑Ë™ø */
#text-save {
  border-color: #22c55e;                     /* vi·ªÅn xanh l√° nh·∫°t */
  background: #22c55e;                       /* n·ªÅn xanh l√° nh·∫°t */
  color: #ffffff;
  transition: 0.15s ease;
}

#text-save:hover {
  filter: brightness(1.06);                  /* hover s√°ng nh·∫π */
}

#text-save:active,
#text-save:focus-visible {
  outline: none;
  border-color: #22c55e;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.32);  /* vi·ªÅn ph√°t s√°ng gi·ªëng text bar */
}

/* Top Toolbar */
#toolbar {
  width: 100%;
  max-width: 620px;          /* c√πng width v·ªõi A4 */
  margin: 0 auto;
  display: flex;
  justify-content: space-between;
  align-items: center;
  padding: 8px 10px;
  gap: 8px;

  /* ƒê∆°n gi·∫£n, kh√¥ng bo g√≥c, kh√¥ng b√≥ng */
  background: #ffffff;
  border-radius: 0;
  box-shadow: none;
  backdrop-filter: none;
}

.nav-btn,
.primary-btn {
  appearance: none;
  border: 1px solid #d4d4d8;
  padding: 8px 12px;
  border-radius: 8px;
  font-size: 13px;
  cursor: pointer;
  transition: 0.15s;
  font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", "Yu Gothic", sans-serif;

  /* C√πng size */
  min-width: 90px;              /* ngang t·ªëi thi·ªÉu */
  height: 32px;                 /* cao c·ªë ƒë·ªãnh */
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

/* N√∫t tr·∫Øng (back, layout) */
.nav-btn {
  border: 1px solid #d4d4d8;
  background: #ffffff;
  color: #111827;
}

.nav-btn:hover {
  background: #f3f4f6;
}

/* N√∫t PDF ‚Äì m√†u ch√≠nh */
.primary-btn {
  border: 1px solid #16a34a;
  background: #22c55e;
  color: #ffffff;
  font-weight: 600;
}

.primary-btn:hover {
  filter: brightness(1.05);
}

/* Back button */
.nav-btn {
    background: #eef1f7;
    color: #333;
}
.nav-btn:hover {
    background: #e0e3e8;
}

/* Back icon */
.nav-btn .icon {
    font-size: 18px;
    font-weight: 600;
}

/* ---------- Icon-only buttons (Clear / PDF) ---------- */

.icon-only {
  min-width: 44px;       /* thu ng·∫Øn ngang */
  padding: 6px 8px;      /* b·ªõt padding ƒë·ªÉ √¥ g·ªçn l·∫°i */
}

/* b·ªè kho·∫£ng tr·ªëng do font, ch·ªâ d√πng SVG */
.icon-only .icon {
  font-size: 0;
  line-height: 1;
}

/* size icon */
.icon-only .icon svg {
  width: 18px;
  height: 18px;
  display: block;
}

/* ----- PDF button style ----- */
#export-pdf.primary-btn.icon-only {
  min-width: 42px;      /* thu g·ªçn width */
  padding: 6px 8px;     /* thu padding */
  background: transparent;  /* ƒë·ªïi m√†u t√≠m ƒë·∫≠m */
  border: 1px solid transparent;
}

/* hover ƒë·∫πp h∆°n */
#export-pdf.primary-btn.icon-only:hover {
  background: transparent;
  border-color: transparent;
}

/* Filename input */
.filename-box {
    display: flex;
    align-items: center;
    gap: 6px;
    font-size: 14px;
}
.filename-box label {
    white-space: nowrap;
}
.filename-box input {
    width: 120px;
    padding: 6px 8px;
    border-radius: 8px;
    border: 1px solid #cfd4da;
    background: white;
    font-size: 13px;
}

/* 3 n√∫t tr√™n top bar: Trash / Layout / PDF */
body.theme-night #toolbar button {
  transition:
    transform 0.2s ease-out,              /* l√¢u h∆°n ‚Üí c·∫£m gi√°c ‚Äúc√≥ hi·ªáu ·ª©ng‚Äù h∆°n */
    box-shadow 0.2s ease-out,
    background-color 0.2s ease-out,
    border-color 0.2s ease-out;
}

/* Khi click / tap gi·ªØ: ph√≥ng nh·∫π gi·ªëng 3 block */
body.theme-night #toolbar button:active {
  transform: scale(1.03);
  box-shadow: 0 4px 14px rgba(15, 23, 42, 0.22);
}


/* Bottom bar ‚Äì „Éï„Ç°„Ç§„É´ÂêçÂÖ•ÂäõÂ∞ÇÁî® */
#bottom-bar {
  width: 100%;
  max-width: 620px;
  margin: 14px auto 0;
  padding: 10px 12px;
  background: #f3f4f6;
  border-radius: 0;           /* b·ªè bo g√≥c */
  box-shadow: none;           /* b·ªè b√≥ng */
  border: 1px solid #e5e7eb;
  backdrop-filter: none;
}

/* label + input full width */
#bottom-bar .file-name-input {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
}

#bottom-bar .file-name-input label {
  white-space: nowrap;
  font-size: 13px;
  color: #555;
}

#bottom-bar #file-name {
  flex: 1;
  min-width: 0;
  padding: 6px 8px;
  border-radius: 8px;
  border: 1px solid #d1d5db;
  font-size: 13px;
}

#bottom-bar #file-name:focus {
  outline: none;
  border-color: #22c55e;
  box-shadow: 0 0 0 1px rgba(34, 197, 94, 0.4);
}

/* „É¨„Ç§„Ç¢„Ç¶„ÉàÂàáÊõø„Éú„Çø„É≥„ÅÆË¶ã„ÅüÁõÆ„ÇíÂ∞ë„ÅóËñÑ„Åè */
.layout-toggle-btn {
  min-width: 110px;
  font-size: 11px;
  background: #f0fdf4;
}

.layout-toggle-btn:hover {
  background: #dcfce7;
}

/* Fit A4 v√†o kho·∫£ng tr·ªëng gi·ªØa topbar v√† bottombar */
@media (max-width: 500px) {
  #a4-wrapper {
    flex: 1;
    width: 100%;
    display: flex;
    justify-content: center;
    align-items: center; /* cƒÉn gi·ªØa A4 theo chi·ªÅu cao */
    overflow: hidden;    /* tr√°nh l·ªô ph·∫ßn th·ª´a */
    margin: 4px 0;
  }

  #a4-page {
    /* Chi·∫øm to√†n b·ªô chi·ªÅu cao v√πng tr·ªëng */
    height: 100%;
    aspect-ratio: 1 / 1.414; /* t·ªâ l·ªá chu·∫©n A4 */

    max-width: 100%;
    max-height: 100%;

    transform: none !important;  /* H·ªßy scale c≈© */
    transform-origin: top center;
  }
}
/* Khi xu·∫•t PDF tr√™n iPhone: ∆∞u ti√™n ƒë√∫ng t·ªâ l·ªá A4, kh√¥ng ph·ª• thu·ªôc chi·ªÅu cao m√†n h√¨nh */
@media (max-width: 500px) {
  /* Wrapper: cho ph√©p ph·∫ßn A4 cao h∆°n m√†n h√¨nh, ƒë·ªÉ html2canvas ch·ª•p ƒë·ªß */
  body.theme-night.pdf-mode #a4-wrapper {
    align-items: flex-start;  /* A4 d√≠nh l√™n tr√™n 1 ch√∫t c≈©ng kh√¥ng sao */
    overflow: visible;        /* cho ph√©p tr√†n, ƒë·ªÉ ch·ª•p ƒë·ªß chi·ªÅu cao */
  }

  /* A4 page: b·ªè height:100% ƒë·ªÉ aspect-ratio ho·∫°t ƒë·ªông ƒë√∫ng */
  body.theme-night.pdf-mode #a4-page {
    height: auto;
    max-height: none;
  }
}


/* ================== „Çπ„Éû„ÉõË°®Á§∫Áî®„ÅÆË™øÊï¥ ================== */
@media (max-width: 480px) {
  /* B·ªè padding body ƒë·ªÉ kh√¥ng b·ªã tr√†n ngang */
  body {
    padding: 0;
  }

  /* Khung app t·ªïng */
#editor-screen {
  margin-top: 0;
  min-height: 100vh;
  display: flex;
  flex-direction: column;
}

/* Khung ‚Äúm√†n iPhone‚Äù */
#editor-screen.phone-container {
  width: 390px;          /* cho iPhone 15, nh∆∞ng v·∫´n max-width:100% ƒë·ªÉ m√°y nh·ªè h∆°n kh√¥ng b·ªã v·ª° */
  max-width: 100%;
  margin: 0 auto;

  /* d√πng 100vh l√†m fallback, 100svh cho iOS m·ªõi ƒë·ªÉ kh√¥ng b·ªã tr√πm xu·ªëng d∆∞·ªõi URL bar */
  min-height: 100vh;
  min-height: 100svh;

  padding: 8px 10px 12px;
  display: flex;
  flex-direction: column;

  /* Wallpaper */
  background: url("wallpaper.jpg") no-repeat center top;
  background-size: cover;

  box-shadow: none;
  border-radius: 0; /* vi·ªÅn th·∫≥ng 4 g√≥c */
}

  /* Bottom bar s√°t ph√≠a d∆∞·ªõi h∆°n m·ªôt ch√∫t */
  #bottom-bar {
    margin-top: 1px;
  }
}



/* ===========================
   üåô NIGHT CAMPING THEME
   =========================== */

body.theme-night {
  margin: 0;
  padding: 0;
  background: #111827;   /* ho·∫∑c m√†u n√†o c≈©ng ƒë∆∞·ª£c */
}

body.theme-night #editor-screen.phone-container {
  width: 390px;
  margin: 0 auto;
  min-height: 100vh;
  padding: 10px 12px 12px;
  display: flex;
  flex-direction: column;

  /* üåÑ Wallpaper cho to√†n b·ªô app iPhone */
  background: url("wallpaper.jpg") no-repeat center top;
  background-size: cover;

  box-shadow: none;
}


/* 3. Top bar */
body.theme-night #toolbar {
  width: 100%;
  margin: 6px auto 0;
  padding: 10px 14px;
  background: #f9fafb;
  border-radius: 20px;
  display: flex;
  justify-content: space-between;
  align-items: center;
  gap: 10px;
  box-shadow: none;
}

/* 4. N√∫t trong top bar (back + layout) */
body.theme-night .nav-btn {
  appearance: none;
  border: 1px solid #e5e7eb;
  background: #ffffff;
  padding: 6px 12px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 500;
  color: #0f172a;
  cursor: pointer;
  box-shadow: none;
  transition: 0.15s ease;
  font-family: inherit;
}

body.theme-night .nav-btn:hover {
  background: #eef2ff;
}

/* 4b. Layout toggle ‚Äì d√πng icon, ƒë·ªïi theo template */
body.theme-night #layout-toggle .layout-icon svg {
  width: 20px;
  height: 20px;
  display: block;
}

/* M·∫∑c ƒë·ªãnh: 3-block icon hi·ªÉn th·ªã, 2-block ·∫©n */
body.theme-night #layout-toggle .layout-icon-2 {
  display: none !important;
}

/* Khi ƒëang ·ªü layout 2blocks ‚Üí ƒë·ªïi icon */
body.theme-night #layout-toggle.is-2 .layout-icon-3 {
  display: none !important;
}
body.theme-night #layout-toggle.is-2 .layout-icon-2 {
  display: block !important;
}


/* icon m≈©i t√™n trong n√∫t back */
body.theme-night #back-button .icon {
  font-size: 18px;
  font-weight: 600;
}

/* 5. N√∫t PDF ‰øùÂ≠ò (primary) */
body.theme-night .primary-btn {
  appearance: none;
  border: none;
  padding: 7px 16px;
  border-radius: 999px;
  font-size: 12px;
  font-weight: 600;
  cursor: pointer;
  background: linear-gradient(135deg, #22c55e 0%, #4ade80 100%);
  color: #ffffff;
  box-shadow: none;
  transition: 0.15s ease;
  font-family: inherit;
}

body.theme-night .primary-btn:hover {
  filter: brightness(1.05);
}

/* 6. A4 wrapper ‚Äì b·ªè n·ªÅn tr·∫Øng c≈©, d√πng n·ªÅn trong su·ªët ƒë·ªÉ l·ªô card */
body.theme-night #a4-wrapper {
  background: transparent;
  padding: 20px 0;
}

/* 7. Block (·∫£nh + text) ‚Äì nh√¨n nh∆∞ t·ªù gi·∫•y */
body.theme-night .block {
  background: #ffffff;
  border-radius: 16px;
  border: 1px dashed #d4d4d8;
  transition: transform 0.1s ease-in-out, box-shadow 0.1s ease-in-out;
}

body.theme-night .block:active {
  transform: scale(1.03);
  box-shadow: 0 4px 12px rgba(15,23,42,0.18);
}

/* Placeholder */
body.theme-night .block.placeholder {
  color: #94a3b8;
  font-size: 11.5px;
  text-align: center;
}

/* label + input */
body.theme-night #bottom-bar .file-name-input {
  display: flex;
  align-items: center;
  gap: 8px;
  width: 100%;
}

body.theme-night #bottom-bar .file-name-input label {
  white-space: nowrap;
  font-size: 13px;
  color: #555;
}

body.theme-night #bottom-bar #file-name {
  flex: 1;
  min-width: 0;
  padding: 6px 10px;
  border-radius: 10px;
  border: 1px solid #d1d5db;
  font-size: 13px;
  background: #ffffff;
  box-shadow: inset 0 1px 3px rgba(15,23,42,0.08);
}

body.theme-night #bottom-bar #file-name:focus {
  outline: none;
  border-color: #22c55e;                             /* xanh l√° */
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.32);      /* ph√°t s√°ng xanh */
}

/* Block ƒë∆∞·ª£c ch·ªçn ‚Äì vi·ªÅn & glow gi·ªëng file-name ·ªü bottom bar */
body.theme-night .block.is-selected {
  border-style: solid !important;
  border-color: #22c55e !important;
  box-shadow: 0 0 0 2px rgba(34, 197, 94, 0.32);
}

body.theme-night.pdf-mode .block {
  border: none !important;
}

body.theme-night.pdf-mode .block.is-selected {
  border: none !important;
  box-shadow: none !important;
}

/* ====== Top bar icon buttons (Clear & PDF) ====== */

/* 1) X√≥a vi·ªÅn + n·ªÅn c·ªßa 2 n√∫t */
#back-button.nav-btn,
#export-pdf.primary-btn {
  border: none;             /* b·ªè vi·ªÅn */
  background: transparent;  /* b·ªè n·ªÅn tr·∫Øng / t√≠m */
  box-shadow: none;         /* n·∫øu c√≥ b√≥ng th√¨ b·ªè lu√¥n */
  min-width: 55px;          /* n√∫t vu√¥ng g·ªçn */
  height: 32px;
  padding: 0;               /* kh√¥ng th√™m padding th·ª´a */
}

/* 2) TƒÉng size icon b√™n trong */
#back-button .icon,
#export-pdf .icon {
  font-size: 28px;          /* n·∫øu icon l√† text / font */
  line-height: 1;
  display: flex;
  align-items: center;
  justify-content: center;
}

/* N·∫øu icon l√† SVG th√¨ ph√≥ng to lu√¥n SVG */
#back-button .icon svg,
#export-pdf .icon svg {
  width: 28px;
  height: 28px;
}

/* 3) ƒê·ªïi m√†u icon PDF sang ƒë·ªè */
#export-pdf .icon,
#export-pdf .icon svg {
  color: #e02424;           /* ho·∫∑c #ff3b30 n·∫øu mu·ªën ƒë·ªè iOS h∆°n */
}


/* Khi export PDF: ·∫©n ch·ªØ hint trong block ·∫£nh ch∆∞a ch·ªçn */
body.theme-night.pdf-mode .block[data-type="image"].placeholder {
  color: transparent !important;
}
/* Khi export PDF: ·∫©n lu√¥n ch·ªØ„Äå„Çø„ÉÉ„Éó„Åó„Å¶„ÉÜ„Ç≠„Çπ„ÉàÂÖ•Âäõ„Äç */
body.theme-night.pdf-mode .block[data-type="text"].placeholder {
  color: transparent !important;
}

/* ============================
   ü©µ Tappable animation ‚Äì iOS style
   ============================ */

/* T·∫•t c·∫£ th√†nh ph·∫ßn "b·∫•m ƒë∆∞·ª£c" trong theme-night */
body.theme-night .block,
body.theme-night .modal-buttons button {
  transition:
    transform 0.12s ease-out,
    box-shadow 0.12s ease-out,
    background-color 0.12s ease-out,
    border-color 0.12s ease-out;
}

/* Hover ‚Äì ch·ªâ cho block + n√∫t trong modal */
body.theme-night .block:hover,
body.theme-night .modal-buttons button:hover {
  transform: translateY(-1px);
  box-shadow: 0 6px 16px rgba(15, 23, 42, 0.12);
}

/* Active ‚Äì block + n√∫t trong modal */
body.theme-night .block:active,
body.theme-night .modal-buttons button:active {
  transform: translateY(0) scale(0.97);
  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.20);
}

/* ============================
   üîÅ Top bar buttons ‚Äì c√πng c·∫£m gi√°c v·ªõi 3 block khi nh·∫•n
   ============================ */

/* 3 n√∫t tr√™n top bar (trash / layout / PDF) */
body.theme-night #toolbar button {
  transition:
    transform 0.12s ease-out,
    box-shadow 0.12s ease-out,
    background-color 0.12s ease-out,
    border-color 0.12s ease-out;
}

/* Hover: ch·ªâ th√™m b√≥ng nh·∫π, KH√îNG nh√¥ l√™n ‚Üí kh·ªèi b·ªã "k·∫πt" sau OK/Cancel */
body.theme-night #toolbar button:hover {
  transform: none;
  box-shadow: 0 4px 10px rgba(15, 23, 42, 0.14);
}

/* Active: nh√∫n xu·ªëng y chang .block:active */
body.theme-night #toolbar button:active {
  transform: translateY(0) scale(0.97);
  box-shadow: 0 3px 10px rgba(15, 23, 42, 0.20);
}


/* ============================
   üçé iOS-like container & surfaces
   ============================ */

/* Khung "phone" ch√≠nh */
body.theme-night #editor-screen.phone-container {
  border-radius: 28px;
}

/* Block b√™n trong ‚Äì card tr·∫Øng ki·ªÉu iOS */
body.theme-night .block {
  border-radius: 18px;
  border: 1px dashed rgba(203, 213, 225, 0.9);
  background: #ffffff;
}

/* Placeholder text m·ªÅm h∆°n */
body.theme-night .block.placeholder {
  color: #a1a1aa;
}

/* N√∫t tr√™n toolbar ‚Äì d·∫°ng pill m·∫£nh */
body.theme-night #toolbar .nav-btn,
body.theme-night #toolbar .primary-btn {
  border-radius: 999px;
  border: 1px solid rgba(148, 163, 184, 0.4);
  background: #ffffff;
  box-shadow: 0 1px 2px rgba(15, 23, 42, 0.08);
}

/* N√∫t layout ·ªü gi·ªØa ‚Äì pill s√°ng h∆°n ch√∫t */
body.theme-night #layout-toggle {
  background: #f8fafc;
}

/* N√∫t ‰øùÂ≠ò trong modal ‚Äì pill xanh ki·ªÉu iOS */
body.theme-night #text-save {
  border-radius: 999px;
}

/* N√∫t „Ç≠„É£„É≥„Çª„É´ trong modal ‚Äì pill x√°m nh·∫π */
body.theme-night #text-cancel {
  border-radius: 999px;
  background: #f9fafb;
  border: 1px solid #d4d4d8;
}

body.theme-night #editor-screen.phone-container {
  border-radius: 0 !important;
}

body.theme-night .block {
  border-radius: 0 !important;
  background: transparent !important;
}

/* Placeholder text v·∫´n cƒÉn gi·ªØa nh∆∞ c≈© */
body.theme-night .block.placeholder {
  background: #ffffff !important;
}

body.theme-night .block img {
  width: 100% !important;
  height: 100% !important;
  object-fit: fill  !important;  /* gi·ªØ nguy√™n t·ªâ l·ªá ·∫£nh */
  object-position: center center !important;
  display: block;
  background: #ffffff;              /* n·ªÅn tr·∫Øng khi th·ª´a kh√¥ng gian */
}

body.theme-night #a4-wrapper {
  background: transparent !important;
}

/* A4 h∆°i trong ƒë·ªÉ th·∫•y wallpaper */
body.theme-night #a4-page {
  background: rgba(255, 255, 255, 0.92) !important;   /* 0.9‚Äì0.95 tu·ª≥ b·∫°n */
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);

  box-shadow:
    0 18px 40px rgba(15, 23, 42, 0.25),
    0 0 0 1px rgba(148, 163, 184, 0.25);
}

/* üîπ Top bar + Bottom bar = k√≠nh m·ªù tr√™n n·ªÅn wallpaper */
body.theme-night #toolbar,
body.theme-night #bottom-bar {
  /* n·ªÅn tr·∫Øng nh∆∞ng trong su·ªët ‚Üí nh√¨n th·∫•y wallpaper ph√≠a sau */
  background: rgba(255, 255, 255, 0.55);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px); /* cho Safari / iPhone */

  /* vi·ªÅn + bo g√≥c ki·ªÉu k√≠nh */
  border-radius: 18px;
  border: 1px solid rgba(148, 163, 184, 0.55);

  /* b√≥ng nh·∫π ƒë·ªÉ t√°ch kh·ªèi n·ªÅn */
  box-shadow:
    0 10px 24px rgba(15, 23, 42, 0.20),
    0 0 0 0.5px rgba(148, 163, 184, 0.28);
}

/* === Minimal iOS style Image Picker === */

/* Overlay m·ªù + blur nh·∫π h∆°n (nh√¨n xuy√™n ƒë∆∞·ª£c UI ph√≠a sau) */
/* Overlay ki·ªÉu spotlight ‚Äì trung t√¢m t·ªëi h∆°n, r√¨a g·∫ßn nh∆∞ b√¨nh th∆∞·ªùng */
#image-source-modal {
  background:
    radial-gradient(
      circle at center,
      rgba(15, 23, 42, 0.34) 0%,     /* gi·ªØa ƒë·∫≠m nh·∫•t */
      rgba(15, 23, 42, 0.26) 28%,
      rgba(15, 23, 42, 0.18) 48%,
      rgba(15, 23, 42, 0.08) 72%,
      rgba(15, 23, 42, 0.0) 100%     /* r√¨a g·∫ßn nh∆∞ kh√¥ng che */
    );
  backdrop-filter: blur(4px) saturate(1.05) brightness(0.98);
  -webkit-backdrop-filter: blur(4px) saturate(1.05) brightness(0.98);
  z-index: 1200;

  opacity: 0;
  transition: opacity 0.22s ease-out;
}


#image-source-modal:not(.hidden) {
  opacity: 1;
}
/* tƒÉng kho·∫£ng tr·ªëng gi·ªØa 2 n√∫t icon */
#image-source-modal .image-picker-btn:first-of-type {
  margin-right: 46px;   /* ch·ªânh s·ªë n√†y n·∫øu mu·ªën g·∫ßn/xa h∆°n */
}

/* Zoom + fade icon khi modal hi·ªán l√™n */
#image-source-modal:not(.hidden) .image-picker-btn {
  animation: pickerZoomIn 0.22s cubic-bezier(0.22, 0.7, 0.3, 1);
}

/* Icon th·ª© 2 delay nh·∫π cho c·∫£m gi√°c ‚Äústagger‚Äù */
#image-source-modal:not(.hidden) .image-picker-btn:nth-of-type(2) {
  animation-delay: 0.03s;
}

/* Keyframes cho hi·ªáu ·ª©ng zoom-in */
@keyframes pickerZoomIn {
  from {
    transform: scale(0.85) translateY(6px);
    opacity: 0;
  }
  to {
    transform: scale(1) translateY(0);
    opacity: 1;
  }
}


/* Button icon tr√≤n ‚Äì kh√¥ng c√≤n panel n·ªÅn */
/* === N√∫t tr√≤n d√πng chung cho image picker + text modal === */
.image-picker-btn,
.text-modal-icon-btn {
  width: 72px;
  height: 72px;
  border-radius: 999px;
  border: 1px solid rgba(255, 255, 255, 0.9);
  background: #ffffffee;  /* tr·∫Øng h∆°i trong */
  backdrop-filter: blur(3px);
  -webkit-backdrop-filter: blur(3px);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  outline: none;
  position: relative;
  overflow: hidden;
  box-shadow:
    0 12px 26px rgba(0, 0, 0, 0.65);
  transition:
    transform 0.18s ease-out,
    box-shadow 0.18s ease-out,
    filter 0.18s ease-out;
}

/* Hover / active chung */
.image-picker-btn:hover,
.text-modal-icon-btn:hover {
  filter: brightness(1.06);
  box-shadow: 0 16px 34px rgba(0, 0, 0, 0.7);
}

.image-picker-btn:active,
.text-modal-icon-btn:active {
  transform: translateY(1px) scale(0.96);
  box-shadow: 0 9px 20px rgba(0, 0, 0, 0.8);
  filter: brightness(0.96);
}

/* Icon size chung */
.image-picker-btn svg,
.text-modal-icon-btn svg {
  width: 32px;
  height: 32px;
  color: #0f172a;
}

/* M√†u ri√™ng theo ch·ª©c nƒÉng */
#image-source-gallery svg {
  color: #0ea5e9;   /* blue ‚Äì gallery */
}
#image-source-camera svg {
  color: #fb7185;   /* pink ‚Äì camera */
}
#text-clear svg {
  color: #0ea5e9;   /* gi·ªëng gallery ‚Äì clear */
}
#text-save svg {
  color: #22c55e;   /* xanh l√° ‚Äì save */
}

/* Ripple chung */
.image-picker-btn::after,
.text-modal-icon-btn::after {
  content: "";
  position: absolute;
  left: 50%;
  top: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  transform: translate(-50%, -50%);
  background: rgba(148, 163, 184, 0.35);
  opacity: 0;
  pointer-events: none;
  transition:
    width 0.32s ease-out,
    height 0.32s ease-out,
    opacity 0.42s ease-out;
}

.image-picker-btn:active::after,
.text-modal-icon-btn:active::after {
  width: 190%;
  height: 190%;
  opacity: 1;
}

/* --- N√∫t trong modal text: nh·ªè & nh·∫π h∆°n image picker --- */
#text-edit-modal .text-modal-icon-btn {
  width: 48px;
  height: 48px;
  border-radius: 999px;
  background: #ffffff;                       /* tr·∫Øng ph·∫≥ng */
  border: 1px solid rgba(148, 163, 184, 0.6);
  box-shadow: none;                          /* b·ªè b√≥ng */
  backdrop-filter: none;
  -webkit-backdrop-filter: none;
  transform: none;
}

/* icon nh·ªè l·∫°i cho c√¢n panel */
#text-edit-modal .text-modal-icon-btn svg {
  width: 22px;
  height: 22px;
}

/* Clear tr√°i ‚Äì m√†u x√°m nh·∫π, secondary */
#text-clear {
  order: 0;
  border-color: rgba(148, 163, 184, 0.7);
  background: #ffffff;
}
#text-clear svg {
  color: #64748b;   /* x√°m xanh */
}

/* Save ph·∫£i ‚Äì primary, t·ª± ƒë·ªông ƒë·∫©y s√°t ph·∫£i */
#text-save {
  order: 1;
  margin-left: auto;            /* üëâ ƒë·∫©y sang ph·∫£i */
  border-color: #22c55e;
  background: #22c55e;
}
#text-save svg {
  color: #ffffff;
}


/* hover/active nh·∫π nh√†ng h∆°n, kh√¥ng nh√∫n m·∫°nh, kh√¥ng ƒë·ªïi shadow */
#text-edit-modal .text-modal-icon-btn:hover {
  filter: brightness(1.03);
  box-shadow: none;
}

#text-edit-modal .text-modal-icon-btn:active {
  transform: scale(0.96);
  box-shadow: none;
  filter: brightness(0.98);
}
/* N√∫t SAVE trong modal text: n·ªÅn tr·∫Øng, icon xanh */
#text-edit-modal #text-save {
  background: #ffffff;                         /* b·ªè n·ªÅn xanh l√° */
  border-color: rgba(34, 197, 94, 0.8);        /* vi·ªÅn xanh nh·∫π */
}

#text-edit-modal #text-save svg {
  color: #22c55e;                              /* ch·ªâ icon m√†u xanh */
}

/* N√∫t CLEAR: icon xanh d∆∞∆°ng nh·∫π */
#text-edit-modal #text-clear svg {
  color: #0ea5e9;
}


/* üìÑ Khi export PDF ‚Üí t·∫Øt hi·ªáu ·ª©ng k√≠nh, A4 tr·∫Øng 100% */
body.theme-night.pdf-mode #a4-page {
  background: #ffffff !important;
  box-shadow: none !important;
  backdrop-filter: none !important;
  -webkit-backdrop-filter: none !important;
}


/* ============================
   üì± iPhone / m√†n nh·ªè ‚Äì fix full-height
   ============================ */
@media (max-width: 500px) {
  /* To√†n b·ªô m√†n editor chi·∫øm tr·ªçn chi·ªÅu cao nh√¨n th·∫•y (100svh) */
  body.theme-night #editor-screen.phone-container {
    width: 100%;
    max-width: 100%;
    margin: 0;

    /* d√πng 100svh: chi·ªÅu cao "nh·ªè" h∆°n, tr√°nh b·ªã ƒÉn m·∫•t b·ªüi thanh URL Safari */
    height: 100svh;
    min-height: 100svh;

    padding: env(safe-area-inset-top, 4px)
             8px
             max(env(safe-area-inset-bottom), 6px);

    display: flex;
    flex-direction: column;
    box-shadow: none;
    border-radius: 0 !important;
  }

  /* Top bar d√≠nh s√°t c·∫°nh tr√™n c·ªßa container */
  body.theme-night #toolbar {
    width: 100%;
    margin: 0 0 4px;
  }

  /* A4 wrapper ‚Äì v√πng scroll duy nh·∫•t ·ªü gi·ªØa */
  body.theme-night #a4-wrapper {
    flex: 1;
    padding: 4px 0 4px;
    overflow-y: auto;
  }

  /* Bottom bar s√°t d∆∞·ªõi nh∆∞ng v·∫´n c√°ch nh·∫π UI c·ªßa Safari */
  body.theme-night #bottom-bar {
    width: 100%;
    margin: 4px 0 0;
  }
}

/* ============ Modal Buttons ‚Äì ph√≥ng to icon cho c√¢n ƒë·ªëi ============ */
.text-modal-icon-btn svg {
  width: 60px;
  height: 60px;
}

.text-modal-icon-btn {
  width: 50px;
  height: 50px;
  display: flex;
  justify-content: center;
  align-items: center;
  border-radius: 50%; /* ƒë·∫πp h∆°n, ƒë·ªìng b·ªô icon tr√≤n */
}

/* Floppy icon SAVE ‚Äì x√°m ƒë·∫≠m, v·∫´n gi·ªØ border xanh */
#text-edit-modal #text-save svg {
  color: #475569 !important; /* x√°m ƒë·∫≠m ‚Äì Slate600 */
}

/* Vi·ªÅn xanh ch·ªâ ƒë·ªÉ NH·∫§N ch·ª©c nƒÉng save */
#text-edit-modal #text-save {
  background: #ffffff;                         /* n·ªÅn tr·∫Øng */
  border-color: rgba(34,197,94,0.85);          /* vi·ªÅn xanh l√° nh·∫°t */
}

/* ·∫®n to√†n b·ªô UI ngo√†i t·ªù A4 khi export PDF */
body.pdf-mode #toolbar,
body.pdf-mode #bottom-bar,
body.pdf-mode #text-edit-modal,
body.pdf-mode #image-source-modal {
  display: none !important;
}

body.pdf-mode #editor-screen {
  padding: 0 !important;
  margin: 0 !important;
}

body.pdf-mode {
  overflow: hidden !important;
  background: #ffffff !important;
}

/* A4 lu√¥n n·∫±m ch√≠nh gi·ªØa */
body.pdf-mode #a4-wrapper {
  display: flex !important;
  justify-content: center !important;
  align-items: center !important;
  height: 100vh !important;
  margin: 0 !important;
  padding: 0 !important;
}

/* ‚≠ê TƒÉng chi·ªÅu ngang cho Clear v√† Hozon ƒë·ªÉ d·ªÖ touch h∆°n */
#clear-button.icon-only,
#export-pdf.icon-only {
  min-width: 55px !important;   /* tƒÉng t·ª´ 44px ‚Üí 58px (+32%) */
  width: 55px !important;
}

/* ‚≠ê Icon t·ª± scale l·ªõn, nh√¨n c√¢n ƒë·ªëi h∆°n */
#clear-button.icon-only svg,
#export-pdf.icon-only svg {
  width: 22px !important;
  height: 22px !important;
}

/* ===== Crop Modal ===== */
.crop-modal.hidden { display: none; }

.crop-modal{
  position: fixed;
  inset: 0;
  z-index: 99999;
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 14px;
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
}

.crop-panel{
  position: relative;
  width: 100%;
  max-width: 520px;
  border-radius: 16px;
  background: rgba(255,255,255,0.85);
  border: 1px solid rgba(148,163,184,0.55);
  box-shadow: 0 18px 40px rgba(15,23,42,0.35);
  padding: 14px 14px 12px;
}

.crop-title{
  text-align: center;
  font-weight: 700;
  color: #111827;
  margin-bottom: 10px;
  font-size: 14px;
}

.crop-stage{
  position: relative;
  z-index: 1;
  width: 100%;
  aspect-ratio: 1 / 1;      /* s·∫Ω ƒë∆∞·ª£c JS ch·ªânh theo t·ªâ l·ªá block */
  border-radius: 12px;
  overflow: hidden;
  background: #0b1220;
}

#crop-canvas{
  width: 100%;
  height: 100%;
  display: block;
  touch-action: pan-x pan-y; /* ‚úÖ cho ph√©p k√©o ·∫£nh, nh∆∞ng kh√¥ng ch·∫∑n slider */
}

.crop-frame{
  position: absolute;
  inset: 8px;
  border: 2px solid rgba(255,255,255,0.95);
  border-radius: 10px;
  box-shadow: 0 0 0 9999px rgba(0,0,0,0.25);
  pointer-events: none;
}

.crop-controls{
  position: relative;
  z-index: 20;       /* ‚úÖ slider ·ªü l·ªõp tr√™n h·∫≥n */
  margin-top: 10px;
}

#crop-zoom{
  width: 100%;
  position: relative;
  z-index: 21;
  pointer-events: auto;
  touch-action: pan-x;
}

.crop-actions{
  position: relative;
  z-index: 20;       /* ‚úÖ n√∫t c≈©ng ·ªü l·ªõp tr√™n */
}

.crop-btn{
  flex: 1;
  padding: 10px 12px;
  border-radius: 999px;
  border: 1px solid rgba(148,163,184,0.6);
  background: #ffffff;
  color: #111827;
  font-weight: 600;
}

.crop-primary{
  border-color: rgba(34,197,94,0.9);
  color: #0f172a;
}
body.crop-open #toolbar{
  pointer-events: none;  /* ‚úÖ toolbar kh√¥ng ƒÉn thao t√°c */
}

body.crop-open #toolbar{ pointer-events: none; }